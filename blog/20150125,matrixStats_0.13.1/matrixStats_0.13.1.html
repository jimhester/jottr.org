<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

<title>PACKAGE: matrixStats 0.13.1 - Methods that Apply to Rows and Columns of a Matrix (and Vectors)</title>

<script type="text/javascript">
window.onload = function() {
  var imgs = document.getElementsByTagName('img'), i, img;
  for (i = 0; i < imgs.length; i++) {
    img = imgs[i];
    // center an image if it is the only element of its parent
    if (img.parentElement.childElementCount === 1)
      img.parentElement.style.textAlign = 'center';
  }
};
</script>

<!-- Styles for R syntax highlighter -->
<style type="text/css">
   pre .operator,
   pre .paren {
     color: rgb(104, 118, 135)
   }

   pre .literal {
     color: #990073
   }

   pre .number {
     color: #099;
   }

   pre .comment {
     color: #998;
     font-style: italic
   }

   pre .keyword {
     color: #900;
     font-weight: bold
   }

   pre .identifier {
     color: rgb(0, 0, 0);
   }

   pre .string {
     color: #d14;
   }
</style>

<!-- R syntax highlighter -->
<script type="text/javascript">
var hljs=new function(){function m(p){return p.replace(/&/gm,"&amp;").replace(/</gm,"&lt;")}function f(r,q,p){return RegExp(q,"m"+(r.cI?"i":"")+(p?"g":""))}function b(r){for(var p=0;p<r.childNodes.length;p++){var q=r.childNodes[p];if(q.nodeName=="CODE"){return q}if(!(q.nodeType==3&&q.nodeValue.match(/\s+/))){break}}}function h(t,s){var p="";for(var r=0;r<t.childNodes.length;r++){if(t.childNodes[r].nodeType==3){var q=t.childNodes[r].nodeValue;if(s){q=q.replace(/\n/g,"")}p+=q}else{if(t.childNodes[r].nodeName=="BR"){p+="\n"}else{p+=h(t.childNodes[r])}}}if(/MSIE [678]/.test(navigator.userAgent)){p=p.replace(/\r/g,"\n")}return p}function a(s){var r=s.className.split(/\s+/);r=r.concat(s.parentNode.className.split(/\s+/));for(var q=0;q<r.length;q++){var p=r[q].replace(/^language-/,"");if(e[p]){return p}}}function c(q){var p=[];(function(s,t){for(var r=0;r<s.childNodes.length;r++){if(s.childNodes[r].nodeType==3){t+=s.childNodes[r].nodeValue.length}else{if(s.childNodes[r].nodeName=="BR"){t+=1}else{if(s.childNodes[r].nodeType==1){p.push({event:"start",offset:t,node:s.childNodes[r]});t=arguments.callee(s.childNodes[r],t);p.push({event:"stop",offset:t,node:s.childNodes[r]})}}}}return t})(q,0);return p}function k(y,w,x){var q=0;var z="";var s=[];function u(){if(y.length&&w.length){if(y[0].offset!=w[0].offset){return(y[0].offset<w[0].offset)?y:w}else{return w[0].event=="start"?y:w}}else{return y.length?y:w}}function t(D){var A="<"+D.nodeName.toLowerCase();for(var B=0;B<D.attributes.length;B++){var C=D.attributes[B];A+=" "+C.nodeName.toLowerCase();if(C.value!==undefined&&C.value!==false&&C.value!==null){A+='="'+m(C.value)+'"'}}return A+">"}while(y.length||w.length){var v=u().splice(0,1)[0];z+=m(x.substr(q,v.offset-q));q=v.offset;if(v.event=="start"){z+=t(v.node);s.push(v.node)}else{if(v.event=="stop"){var p,r=s.length;do{r--;p=s[r];z+=("</"+p.nodeName.toLowerCase()+">")}while(p!=v.node);s.splice(r,1);while(r<s.length){z+=t(s[r]);r++}}}}return z+m(x.substr(q))}function j(){function q(x,y,v){if(x.compiled){return}var u;var s=[];if(x.k){x.lR=f(y,x.l||hljs.IR,true);for(var w in x.k){if(!x.k.hasOwnProperty(w)){continue}if(x.k[w] instanceof Object){u=x.k[w]}else{u=x.k;w="keyword"}for(var r in u){if(!u.hasOwnProperty(r)){continue}x.k[r]=[w,u[r]];s.push(r)}}}if(!v){if(x.bWK){x.b="\\b("+s.join("|")+")\\s"}x.bR=f(y,x.b?x.b:"\\B|\\b");if(!x.e&&!x.eW){x.e="\\B|\\b"}if(x.e){x.eR=f(y,x.e)}}if(x.i){x.iR=f(y,x.i)}if(x.r===undefined){x.r=1}if(!x.c){x.c=[]}x.compiled=true;for(var t=0;t<x.c.length;t++){if(x.c[t]=="self"){x.c[t]=x}q(x.c[t],y,false)}if(x.starts){q(x.starts,y,false)}}for(var p in e){if(!e.hasOwnProperty(p)){continue}q(e[p].dM,e[p],true)}}function d(B,C){if(!j.called){j();j.called=true}function q(r,M){for(var L=0;L<M.c.length;L++){if((M.c[L].bR.exec(r)||[null])[0]==r){return M.c[L]}}}function v(L,r){if(D[L].e&&D[L].eR.test(r)){return 1}if(D[L].eW){var M=v(L-1,r);return M?M+1:0}return 0}function w(r,L){return L.i&&L.iR.test(r)}function K(N,O){var M=[];for(var L=0;L<N.c.length;L++){M.push(N.c[L].b)}var r=D.length-1;do{if(D[r].e){M.push(D[r].e)}r--}while(D[r+1].eW);if(N.i){M.push(N.i)}return f(O,M.join("|"),true)}function p(M,L){var N=D[D.length-1];if(!N.t){N.t=K(N,E)}N.t.lastIndex=L;var r=N.t.exec(M);return r?[M.substr(L,r.index-L),r[0],false]:[M.substr(L),"",true]}function z(N,r){var L=E.cI?r[0].toLowerCase():r[0];var M=N.k[L];if(M&&M instanceof Array){return M}return false}function F(L,P){L=m(L);if(!P.k){return L}var r="";var O=0;P.lR.lastIndex=0;var M=P.lR.exec(L);while(M){r+=L.substr(O,M.index-O);var N=z(P,M);if(N){x+=N[1];r+='<span class="'+N[0]+'">'+M[0]+"</span>"}else{r+=M[0]}O=P.lR.lastIndex;M=P.lR.exec(L)}return r+L.substr(O,L.length-O)}function J(L,M){if(M.sL&&e[M.sL]){var r=d(M.sL,L);x+=r.keyword_count;return r.value}else{return F(L,M)}}function I(M,r){var L=M.cN?'<span class="'+M.cN+'">':"";if(M.rB){y+=L;M.buffer=""}else{if(M.eB){y+=m(r)+L;M.buffer=""}else{y+=L;M.buffer=r}}D.push(M);A+=M.r}function G(N,M,Q){var R=D[D.length-1];if(Q){y+=J(R.buffer+N,R);return false}var P=q(M,R);if(P){y+=J(R.buffer+N,R);I(P,M);return P.rB}var L=v(D.length-1,M);if(L){var O=R.cN?"</span>":"";if(R.rE){y+=J(R.buffer+N,R)+O}else{if(R.eE){y+=J(R.buffer+N,R)+O+m(M)}else{y+=J(R.buffer+N+M,R)+O}}while(L>1){O=D[D.length-2].cN?"</span>":"";y+=O;L--;D.length--}var r=D[D.length-1];D.length--;D[D.length-1].buffer="";if(r.starts){I(r.starts,"")}return R.rE}if(w(M,R)){throw"Illegal"}}var E=e[B];var D=[E.dM];var A=0;var x=0;var y="";try{var s,u=0;E.dM.buffer="";do{s=p(C,u);var t=G(s[0],s[1],s[2]);u+=s[0].length;if(!t){u+=s[1].length}}while(!s[2]);if(D.length>1){throw"Illegal"}return{r:A,keyword_count:x,value:y}}catch(H){if(H=="Illegal"){return{r:0,keyword_count:0,value:m(C)}}else{throw H}}}function g(t){var p={keyword_count:0,r:0,value:m(t)};var r=p;for(var q in e){if(!e.hasOwnProperty(q)){continue}var s=d(q,t);s.language=q;if(s.keyword_count+s.r>r.keyword_count+r.r){r=s}if(s.keyword_count+s.r>p.keyword_count+p.r){r=p;p=s}}if(r.language){p.second_best=r}return p}function i(r,q,p){if(q){r=r.replace(/^((<[^>]+>|\t)+)/gm,function(t,w,v,u){return w.replace(/\t/g,q)})}if(p){r=r.replace(/\n/g,"<br>")}return r}function n(t,w,r){var x=h(t,r);var v=a(t);var y,s;if(v){y=d(v,x)}else{return}var q=c(t);if(q.length){s=document.createElement("pre");s.innerHTML=y.value;y.value=k(q,c(s),x)}y.value=i(y.value,w,r);var u=t.className;if(!u.match("(\\s|^)(language-)?"+v+"(\\s|$)")){u=u?(u+" "+v):v}if(/MSIE [678]/.test(navigator.userAgent)&&t.tagName=="CODE"&&t.parentNode.tagName=="PRE"){s=t.parentNode;var p=document.createElement("div");p.innerHTML="<pre><code>"+y.value+"</code></pre>";t=p.firstChild.firstChild;p.firstChild.cN=s.cN;s.parentNode.replaceChild(p.firstChild,s)}else{t.innerHTML=y.value}t.className=u;t.result={language:v,kw:y.keyword_count,re:y.r};if(y.second_best){t.second_best={language:y.second_best.language,kw:y.second_best.keyword_count,re:y.second_best.r}}}function o(){if(o.called){return}o.called=true;var r=document.getElementsByTagName("pre");for(var p=0;p<r.length;p++){var q=b(r[p]);if(q){n(q,hljs.tabReplace)}}}function l(){if(window.addEventListener){window.addEventListener("DOMContentLoaded",o,false);window.addEventListener("load",o,false)}else{if(window.attachEvent){window.attachEvent("onload",o)}else{window.onload=o}}}var e={};this.LANGUAGES=e;this.highlight=d;this.highlightAuto=g;this.fixMarkup=i;this.highlightBlock=n;this.initHighlighting=o;this.initHighlightingOnLoad=l;this.IR="[a-zA-Z][a-zA-Z0-9_]*";this.UIR="[a-zA-Z_][a-zA-Z0-9_]*";this.NR="\\b\\d+(\\.\\d+)?";this.CNR="\\b(0[xX][a-fA-F0-9]+|(\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)";this.BNR="\\b(0b[01]+)";this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~";this.ER="(?![\\s\\S])";this.BE={b:"\\\\.",r:0};this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE],r:0};this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE],r:0};this.CLCM={cN:"comment",b:"//",e:"$"};this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"};this.HCM={cN:"comment",b:"#",e:"$"};this.NM={cN:"number",b:this.NR,r:0};this.CNM={cN:"number",b:this.CNR,r:0};this.BNM={cN:"number",b:this.BNR,r:0};this.inherit=function(r,s){var p={};for(var q in r){p[q]=r[q]}if(s){for(var q in s){p[q]=s[q]}}return p}}();hljs.LANGUAGES.cpp=function(){var a={keyword:{"false":1,"int":1,"float":1,"while":1,"private":1,"char":1,"catch":1,"export":1,virtual:1,operator:2,sizeof:2,dynamic_cast:2,typedef:2,const_cast:2,"const":1,struct:1,"for":1,static_cast:2,union:1,namespace:1,unsigned:1,"long":1,"throw":1,"volatile":2,"static":1,"protected":1,bool:1,template:1,mutable:1,"if":1,"public":1,friend:2,"do":1,"return":1,"goto":1,auto:1,"void":2,"enum":1,"else":1,"break":1,"new":1,extern:1,using:1,"true":1,"class":1,asm:1,"case":1,typeid:1,"short":1,reinterpret_cast:2,"default":1,"double":1,register:1,explicit:1,signed:1,typename:1,"try":1,"this":1,"switch":1,"continue":1,wchar_t:1,inline:1,"delete":1,alignof:1,char16_t:1,char32_t:1,constexpr:1,decltype:1,noexcept:1,nullptr:1,static_assert:1,thread_local:1,restrict:1,_Bool:1,complex:1},built_in:{std:1,string:1,cin:1,cout:1,cerr:1,clog:1,stringstream:1,istringstream:1,ostringstream:1,auto_ptr:1,deque:1,list:1,queue:1,stack:1,vector:1,map:1,set:1,bitset:1,multiset:1,multimap:1,unordered_set:1,unordered_map:1,unordered_multiset:1,unordered_multimap:1,array:1,shared_ptr:1}};return{dM:{k:a,i:"</",c:[hljs.CLCM,hljs.CBLCLM,hljs.QSM,{cN:"string",b:"'\\\\?.",e:"'",i:"."},{cN:"number",b:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},hljs.CNM,{cN:"preprocessor",b:"#",e:"$"},{cN:"stl_container",b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:a,r:10,c:["self"]}]}}}();hljs.LANGUAGES.r={dM:{c:[hljs.HCM,{cN:"number",b:"\\b0[xX][0-9a-fA-F]+[Li]?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+(?:[eE][+\\-]?\\d*)?L\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+\\.(?!\\d)(?:i\\b)?",e:hljs.IMMEDIATE_RE,r:1},{cN:"number",b:"\\b\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\.\\d+(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"keyword",b:"(?:tryCatch|library|setGeneric|setGroupGeneric)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\.",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\d+(?![\\w.])",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\b(?:function)",e:hljs.IMMEDIATE_RE,r:2},{cN:"keyword",b:"(?:if|in|break|next|repeat|else|for|return|switch|while|try|stop|warning|require|attach|detach|source|setMethod|setClass)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"literal",b:"(?:NA|NA_integer_|NA_real_|NA_character_|NA_complex_)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"literal",b:"(?:NULL|TRUE|FALSE|T|F|Inf|NaN)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"identifier",b:"[a-zA-Z.][a-zA-Z0-9._]*\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"<\\-(?!\\s*\\d)",e:hljs.IMMEDIATE_RE,r:2},{cN:"operator",b:"\\->|<\\-",e:hljs.IMMEDIATE_RE,r:1},{cN:"operator",b:"%%|~",e:hljs.IMMEDIATE_RE},{cN:"operator",b:">=|<=|==|!=|\\|\\||&&|=|\\+|\\-|\\*|/|\\^|>|<|!|&|\\||\\$|:",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"%",e:"%",i:"\\n",r:1},{cN:"identifier",b:"`",e:"`",r:0},{cN:"string",b:'"',e:'"',c:[hljs.BE],r:0},{cN:"string",b:"'",e:"'",c:[hljs.BE],r:0},{cN:"paren",b:"[[({\\])}]",e:hljs.IMMEDIATE_RE,r:0}]}};
hljs.initHighlightingOnLoad();
</script>



<style type="text/css">
body, td {
   font-family: sans-serif;
   background-color: white;
   font-size: 13px;
}

body {
  max-width: 800px;
  margin: auto;
  padding: 1em;
  line-height: 20px;
}

tt, code, pre {
   font-family: 'DejaVu Sans Mono', 'Droid Sans Mono', 'Lucida Console', Consolas, Monaco, monospace;
}

h1 {
   font-size:2.2em;
}

h2 {
   font-size:1.8em;
}

h3 {
   font-size:1.4em;
}

h4 {
   font-size:1.0em;
}

h5 {
   font-size:0.9em;
}

h6 {
   font-size:0.8em;
}

a:visited {
   color: rgb(50%, 0%, 50%);
}

pre, img {
  max-width: 100%;
}
pre {
  overflow-x: auto;
}
pre code {
   display: block; padding: 0.5em;
}

code {
  font-size: 92%;
  border: 1px solid #ccc;
}

code[class] {
  background-color: #F8F8F8;
}

table, td, th {
  border: none;
}

blockquote {
   color:#666666;
   margin:0;
   padding-left: 1em;
   border-left: 0.5em #EEE solid;
}

hr {
   height: 0px;
   border-bottom: none;
   border-top-width: thin;
   border-top-style: dotted;
   border-top-color: #999999;
}

@media print {
   * {
      background: transparent !important;
      color: black !important;
      filter:none !important;
      -ms-filter: none !important;
   }

   body {
      font-size:12pt;
      max-width:100%;
   }

   a, a:visited {
      text-decoration: underline;
   }

   hr {
      visibility: hidden;
      page-break-before: always;
   }

   pre, blockquote {
      padding-right: 1em;
      page-break-inside: avoid;
   }

   tr, img {
      page-break-inside: avoid;
   }

   img {
      max-width: 100% !important;
   }

   @page :left {
      margin: 15mm 20mm 15mm 10mm;
   }

   @page :right {
      margin: 15mm 10mm 15mm 20mm;
   }

   p, h2, h3 {
      orphans: 3; widows: 3;
   }

   h2, h3 {
      page-break-after: avoid;
   }
}
</style>



</head>

<body>
<h1>PACKAGE: matrixStats 0.13.1 - Methods that Apply to Rows and Columns of a Matrix (and Vectors)</h1>

<p>by Henrik Bengtsson on 2015-01-25
(keywords: R, CRAN, package, performance, memory, speed)</p>

<p>A new release 0.13.1 of <a href="http://cran.r-project.org/package=matrixStats">matrixStats</a> is now on CRAN.  The source code is available on <a href="https://github.com/HenrikBengtsson/matrixStats">GitHub</a>.</p>

<h2>What does it do?</h2>

<p>The matrixStats package provides highly optimized functions for computing common summaries over rows and columns of matrices, e.g. <code>rowQuantiles()</code>.  There are also functions that operate on vectors, e.g. <code>logSumExp()</code>.  Their implementations strive to minimize both memory usage and processing time.  They are often remarkably faster compared to good old <code>apply()</code> solutions.  The calculations are mostly implemented in C, which allow us to optimize(*) beyond what is possible to do in plain R.  The package installs out-of-the-box on all common operating systems, including Linux, OS X and Windows.</p>

<p>The following example computes the median of the columns in a 20-by-500 matrix</p>

<pre><code class="r">&gt; library(&quot;matrixStats&quot;)
&gt; X &lt;- matrix(rnorm(20 * 500), nrow = 20, ncol = 500)
&gt; stats &lt;- microbenchmark::microbenchmark(colMedians = colMedians(X), 
+     `apply+median` = apply(X, MARGIN = 2, FUN = median), unit = &quot;ms&quot;)
&gt; stats
Unit: milliseconds
         expr   min    lq  mean median   uq    max neval cld
   colMedians  0.41  0.45  0.49   0.47  0.5   0.75   100  a 
 apply+median 21.50 22.77 25.59  23.86 26.2 107.12   100   b
</code></pre>

<p><img src="data:image/png;base64,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" alt=""/></p>

<p>It shows that <code>colMedians()</code> is ~51 times faster than <code>apply(..., MARGIN=2, FUN=median)</code> in this particular case.  The relative gain varies with matrix shape, so you should benchmark with your configurations.  You can also play around with the benchmark reports that are under development, e.g. <code>html &lt;- matrixStats:::benchmark(&quot;colRowMedians&quot;); !html</code>.</p>

<h2>What is new?</h2>

<p>With this release, all <em>the functions run faster than ever before and at the same time use less memory than ever before</em>, which in turn means that now even larger data matrices can be processed without having to upgrade the RAM.  A few small bugs have also been fixed and some &ldquo;missing&rdquo; <a href="http://cran.r-project.org/web/packages/matrixStats/vignettes/matrixStats-methods.html">functions</a> have been added to the R API.  This update is part of a long-term tune-up that started back in June 2014.  Most of the major groundwork has already been done, but there is still room for improvements.  If you&#39;re using matrixStats functions in your package already now, you should see some notable speedups for those function calls, especially compared to what was available back in June.  For instance, <code>rowMins()</code> is now <a href="http://stackoverflow.com/questions/13676878/fastest-way-to-get-min-from-every-column-in-a-matrix">5-20 times faster</a> than functions such as <code>base::pmin.int()</code> whereas in the past they performed roughly the same.</p>

<p>I&#39;ve also added a large number of new package tests; the R and C source code coverage has recently gone up from 59% to <a href="https://coveralls.io/r/HenrikBengtsson/matrixStats?branch=develop">96%</a> (&hellip; and counting).  Some of the bugs were discovered as part of this effort.  Here a special thank should go out to Jim Hester for his great work on <a href="https://github.com/jimhester/covr">covr</a>, which provides me with on-the-fly coverage reports via Coveralls.  (You can run covr locally or via GitHub + Travis CI, which is very easy if you&#39;re already up and running there.  <em>Try it!</em>)  I would also like to thank the R core team and the CRAN team for their continuous efforts on improving the package tests that we get via <code>R CMD check</code> but also via the CRAN farm (which occasionally catches code issues that I&#39;m not always seeing on my end).</p>

<p><em>Footnote:
(*) One strategy for keeping the memory footprint at a minimum is to optimize the implementations for the integer and the numeric (double) data types separately.  Because of this, a great number of data-type coercions are avoided, coercions that otherwise would consume precious memory due to temporarily allocated copies, but also precious processing time because the garbage collector later would have to spend time cleaning up the mess.   The new <code>weightedMean()</code> function, which is many times faster than <code>stats::weighted.mean()</code>, is one of several cases where this strategy is particular helpful.</em>  </p>

<h2>Links</h2>

<ul>
<li>CRAN page: <a href="http://cran.r-project.org/package=matrixStats">http://cran.r-project.org/package=matrixStats</a></li>
<li>GitHub page: <a href="https://github.com/HenrikBengtsson/matrixStats">https://github.com/HenrikBengtsson/matrixStats</a></li>
<li>Coveralls page: <a href="https://coveralls.io/r/HenrikBengtsson/matrixStats?branch=develop">https://coveralls.io/r/HenrikBengtsson/matrixStats?branch=develop</a></li>
<li>Bug reports: <a href="https://github.com/HenrikBengtsson/matrixStats/issues">https://github.com/HenrikBengtsson/matrixStats/issues</a></li>
<li>covr: <a href="https://github.com/jimhester/covr">https://github.com/jimhester/covr</a></li>
</ul>

</body>

</html>
